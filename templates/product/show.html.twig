{% extends 'base.html.twig' %}

{% block title %}Product{% endblock %}


{% block body %}
    <h1>Product</h1>

    {% include "flash.html.twig" %}

    <a class="btn btn-dark text-white mt-2 col" href="{{ path('app_product_index') }}">back to list</a>

    <div>

        <div class="row justify-content-center">

            <h2 class="row justify-content-center"> {{ product.title }} </h2>

            {% if product.picture is empty %}
                <img class="col-md-4" src="{{ asset('/uploads/articles/default.jpg' ) }}" alt="{{product.description}}" title="{{product.title}}">
            {% else %}
                <img class="col-md-4" src="{{ asset('/uploads/articles/' ~ product.picture) }}" alt="{{product.description}}" title="{{product.title}}">
            {% endif %}

            <p class="row justify-content-center"> {{ product.description }} </p>
    
        </div>

            {# {% if app.user is not null %}
            {{ include('comments/index.html.twig') }}
        {% endif %} #}

    </div>
    {# <form action="{{ path('add_to_cart', {'id': product.id}) }}" method="post">
        <button type="submit">Add to Cart</button>
    </form> #}

        <a class="btn btn-success mt-2" href="{{ path('app_product_index', {'id': product.id}) }}">back to list</a>     
        
        <a class="btn btn-success mt-2" href="{{path('app_cart_add', {'idProduct': product.id}) }}">Ajouter au panier</a> 

    {% if app.user and 'ROLE_ADMIN' in app.user.getroles()  %}

        <a class="btn btn-warning mt-2" href="{{path('app_product_edit', {'id': product.id}) }}">edit</a> 
        {# <a class="btn btn-success mt-2" href="{{ path('app_product_index', {'id': product.id}) }}">back to list</a>     
        <a class="btn btn-warning mt-2" href="{{ path('app_product_edit', {'id': product.id}) }}">edit</a> 
        <a class="btn btn-success mt-2" href="{{ path('app_product_edit', {'id': product.id}) }}">Ajouter au panier</a> 
         #}
    
        {{ include('product/_delete_form.html.twig') }}

    {% endif %} 



    {# {% for comment in article.comments %}

        <p> {{comment.comment}} </p>
        {# erreur a user, car c'est un objet, date aussi #}
        {# <i> {{comment.idUser}} - {{comment.date | date("d-m-Y")}} </p> #} 

    {# {% endfor %} #}




   
{% endblock %} 